<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <title>Help - Gas Flows Simulator</title>
<link rel="stylesheet" href="../common.css">
</head>
<body style="margin:0;">

<!-- Help Modal Content (moved from simulator.html) -->
<div id="helpModal" class="modal" style="display:block;">
  <div class="modal-content" style="margin:4vh auto 2vh auto; max-width:600px; width:90vw; height:80vh;">
    <span class="close" id="closeHelpModal">&times;</span>
    <div class="help-carousel">
      <button class="carousel-btn" id="carouselPrev">&#8592;</button>
      <img id="helpGif" src="../help/Animation1.gif" alt="Help Action" />
      <button class="carousel-btn" id="carouselNext">&#8594;</button>
    </div>
  </div>
</div>
<script>
// Help GIFs, titles, and steps
const helpData = [
  {
    src: '../help/Animation1.gif',
    title: 'Шаг 1: Построение сети',
    steps: [
      'Левый клик для добавления новых или соединения существующих точек',
      'Перетаскивание левой кнопкой для перемещения узлов или холста',
      'Двойной клик по объекту для удаления',
      'Кнопка очистки для очистки сети'
    ]
  },
  {
    src: '../help/Animation2.gif',
    title: 'Шаг 2: Установка параметров',
    steps: [
      'Правый клик по линии или точке для установки параметров',
      'Выбор и изменение нескольких линий удержанием клавиши Ctrl',
      'Установка флажка для фиксации давления',
      'Отключение флажка деактивирует линию'
    ]
  },
  {
    src: '../help/Animation3.gif',
    title: 'Шаг 3: Установка давлений и инъекций',
    steps: [
      'В любой точке установите давление или инъекцию',
      'Отрицательная инъекция - это потребление',
      'Зафиксируйте давление, чтобы сохранить его постоянным',
      'Комбинируйте настройки для сложных сценариев'
    ]
  },
  {
    src: '../help/Animation4.gif',
    title: 'Шаг 4: Запуск симуляции',
    steps: [
      'Кнопка воспроизведения для запуска симуляции в реальном времени',
      'Воспроизведение (мин) для запуска 1 минуты симуляции каждую секунду',
      'Когда параметры стабилизируются, симуляция будет остановлена',
      'Цвета представляют скорость потока'
    ]
  },
  {
    src: '../help/Animation5.gif',
    title: 'Шаг 5: Управление симуляцией',
    steps: [
      'Кнопка паузы для остановки симуляции',
      'Кнопки воспроизведения для повторного запуска симуляции',
      'Кнопка сброса для сброса симуляции',
      'Кнопка очистки для очистки сети'
    ]
  }
];
let currentGif = 0;

const helpModal = document.getElementById('helpModal');
const closeHelpModal = document.getElementById('closeHelpModal');
const helpGif = document.getElementById('helpGif');
const prevBtn = document.getElementById('carouselPrev');
const nextBtn = document.getElementById('carouselNext');

// New: Title and steps elements
let helpTitle = document.getElementById('helpGifTitle');
let helpSteps = document.getElementById('helpGifSteps');
if (!helpTitle) {
  helpTitle = document.createElement('h3');
  helpTitle.id = 'helpGifTitle';
  helpGif.parentNode.parentNode.insertBefore(helpTitle, helpGif.parentNode);
}
if (!helpSteps) {
  helpSteps = document.createElement('ul');
  helpSteps.id = 'helpGifSteps';
  helpGif.parentNode.parentNode.insertBefore(helpSteps, helpGif.parentNode.nextSibling);
}

function showGif(index) {
  const data = helpData[index];
  helpGif.src = data.src;
  helpTitle.textContent = data.title;
  helpSteps.innerHTML = '';
  data.steps.forEach(step => {
    const li = document.createElement('li');
    li.textContent = step;
    helpSteps.appendChild(li);
  });
  prevBtn.disabled = (index === 0);
  nextBtn.disabled = (index === helpData.length - 1);
}

closeHelpModal.onclick = function() {
  window.parent.postMessage({ type: 'closeHelpModal' }, '*');
};
window.onclick = function(event) {
  if (event.target == helpModal) {
    window.parent.postMessage({ type: 'closeHelpModal' }, '*');
  }
};
prevBtn.onclick = function() {
  if (currentGif > 0) {
    currentGif--;
    showGif(currentGif);
  }
};
nextBtn.onclick = function() {
  if (currentGif < helpData.length - 1) {
    currentGif++;
    showGif(currentGif);
  }
};
// Show first gif on load
showGif(currentGif);
</script>
</body>
</html> 