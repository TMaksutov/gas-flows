<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-MYJRPRS3TW"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-MYJRPRS3TW');
  </script>
  <!-- MathJax for LaTeX Rendering -->
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script id="MathJax-script" async
    src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
  </script>
  <meta charset="utf-8">
  <title>Gas Flows Calculator</title>
<link rel="canonical" href="https://gas-flows.com/index.html">

  <meta name="description" content="Gas flow calculator for natural gas pipelines.">
  <meta name="keywords" content="gas flow calculator, gas velocity calculator, natural gas pipelines, gas flow rate, pipeline gas calculator,
  natural gas calculator, gas volume calculator, gas velocity calculator, gas compression calculator, flow rate conversion,
  online gas calculator, gas hydraulics calculator,
  Weymouth equation, Weymouth formula, Weymouth equation in SI units,
  gas flow online, Gas flow calculator free, gas flow calculator free online
  ">
  <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
  <link rel="manifest" href="site.webmanifest">
  <link rel="stylesheet" href="common.css">
</head>

<body>
  <!-- Navigation -->
  <nav>
    <ul>
      <li><a href="index.html" class="active">Flow Calculator</a></li>
      <li><a href="pressures.html">Pressure Converter</a></li>
      <li><a href="simulator.html">Gas flow Simulator</a></li>
      <li><a href="contacts.html">Contacts</a></li>
    </ul>
  </nav>

  <div class="container">
    <h2>Gas Flow Calculator</h2>

    <!-- Inputs -->
    <div id="inputs">
      <div class="field-group"><label for="Tb">Tb (oC)</label><input id="Tb" type="number" step="1" value="20"><span>– Base temperature</span></div>
      <div class="field-group"><label for="Pb">Pb (kPa)</label><input id="Pb" type="number" step="1" value="101.325"><span>– Base pressure</span></div>
      <div class="field-group"><label for="E">E</label><input id="E" type="number" step="0.01" value="0.95"><span>– Pipeline efficiency, less than 1</span></div>
      <div class="field-group"><label for="G">G</label><input id="G" type="number" step="0.01" value="0.6"><span>– Gas gravity (air = 1)</span></div>
      <div class="field-group"><label for="Z">Z</label><input id="Z" type="number" step="0.01" value="0.9"><span>– Compressibility factor</span></div>
      <div class="field-group"><label for="Tf">T (oC)</label><input id="Tf" type="number" step="1" value="15"><span>– Gas temperature</span></div>
      <div class="field-group"><label for="H1">H1 (m)</label><input id="H1" type="number" step="10" value="0"><span>– Upstream elevation</span></div>
      <div class="field-group"><label for="H2">H2 (m)</label><input id="H2" type="number" step="10" value="0"><span>– Downstream elevation</span></div>
      <div class="field-group"><label for="L">L (km)</label><input id="L" type="number" step="1" value="100"><span>– Pipe segment length</span></div>
      <div class="field-group"><label for="D">D (mm)</label><input id="D" type="number" step="1" value="100"><span>– Pipe diameter</span></div>
      <div class="field-group"><label for="P1">P1 (kPa)</label><input id="P1" type="number" step="100" value="5000"><span>– Upstream pressure</span></div>
      <div class="field-group"><label for="P2">P2 (kPa)</label><input id="P2" type="number" step="100" value="4000"><span>– Downstream pressure</span></div>
    </div>

	<!-- Result -->
	<div style="margin-bottom: 12px;">
	  <h2 style="display: inline; margin-right: 10px;">Results</h2>
	  <!--<span style="font-weight: normal; font-size: 1em;">(converted to base conditions)</span> -->
	</div>

<div id="results">
  <div class="field-group">
    <label for="Q_m3s">Q (m³/s)</label>
    <input id="Q_m3s" type="text" readonly>
    <span>– Standard cubic meters per second</span>
  </div>
  <div class="field-group">
    <label for="Q_th_m3h">Q (10³ m³/h)</label>
    <input id="Q_th_m3h" type="text" readonly>
    <span>– Thousand cubic meters per hour</span>
  </div>
  <div class="field-group">
    <label for="Q_mil_m3d">Q (10⁶ m³/d)</label>
    <input id="Q_mil_m3d" type="text" readonly>
    <span>– Million cubic meters per day</span>
  </div>
  <div class="field-group">
    <label for="V1">v₁ (m/s)</label>
    <input id="V1" type="text" readonly>
    <span>– Gas speed at pipeline start</span>
  </div>
  <div class="field-group">
    <label for="V2">v₂ (m/s)</label>
    <input id="V2" type="text" readonly>
    <span>– Gas speed at pipeline end</span>
  </div>
  <div class="field-group">
    <label for="Pavg">Pavg (kPa)</label>
    <input id="Pavg" type="text" readonly>
    <span>– Average pressure in the pipeline</span>
  </div>
  <div class="field-group">
    <label for="Volume">Volume (10³ m³)</label>
    <input id="Volume" type="text" readonly>
    <span>– Gas volume Thousand cubic meters </span>
  </div>

</div>





</div>
<!-- Formulas rendered via MathJax -->
<div class="container">
  <p>Weymouth formula in SI units:</p>

  <p>
    $$
    Q_\text{base} = 3.7435 \cdot 10^{-3} \cdot \left(\frac{T_b}{P_b}\right) \cdot 
    \left( \frac{P_1^2 - e^s \cdot P_2^2}{G \cdot T_f \cdot L_e \cdot Z} \right)^{0.5} 
    \cdot D^{2.667} \cdot E
    $$
  </p>

  <p>
    $$
    L_e = \frac{L \cdot \left(e^s - 1\right)}{s} \qquad \qquad
    s = 0.0684 \cdot G \cdot \left(\frac{H_2 - H_1}{T_f \cdot Z}\right)
    $$
  </p>

  <table style="font-size: 0.95em;">
    <tr><td>\( Q_\text{base} \)</td><td>= Volume flow rate at base conditions, m³/d</td></tr>
    <tr><td>\( T_b \)</td><td>= Base temperature, K</td></tr>
    <tr><td>\( P_b \)</td><td>= Base pressure, kPa</td></tr>
    <tr><td>\( P_1 \)</td><td>= Upstream pressure, kPa</td></tr>
    <tr><td>\( P_2 \)</td><td>= Downstream pressure, kPa</td></tr>
    <tr><td>\( E \)</td><td>= Pipeline efficiency (dimensionless)</td></tr>
    <tr><td>\( G \)</td><td>= Gas gravity (air = 1)</td></tr>
    <tr><td>\( Z \)</td><td>= Gas compressibility factor (dimensionless)</td></tr>
    <tr><td>\( T_f \)</td><td>= Flowing gas temperature, K</td></tr>
    <tr><td>\( L_e \)</td><td>= Equivalent pipe length, km</td></tr>
    <tr><td>\( L \)</td><td>= Pipe segment length, km</td></tr>
    <tr><td>\( D \)</td><td>= Pipe inside diameter, mm</td></tr>
    <tr><td>\( s \)</td><td>= Elevation adjustment parameter</td></tr>
    <tr><td>\( H_1 \)</td><td>= Upstream elevation, m</td></tr>
    <tr><td>\( H_2 \)</td><td>= Downstream elevation, m</td></tr>
  </table>
</div>

<div class="container">
  <p>Gas velocity full expanded formula:</p>

  <p>
    $$
    v = \frac{Q}{A}
    = \frac{Q_\text{base} \times \frac{\rho_\text{base}}{\rho}}{\frac{\pi D^2}{4}}
    = \frac{4 \times Q_\text{base} \times \rho_\text{base}}{\pi D^2 \times \rho}
    = \frac{4 \times Q_\text{base} \times P_\text{base} \times Z \times T}{\pi D^2 \times P \times T_\text{base}}
    $$
  </p>

  <p>Where:</p>
  <table style="font-size: 0.95em;">
    <tr><td>\( v \)</td><td>= Gas velocity, m/s</td></tr>
    <tr><td>\( Q \)</td><td>= Actual volumetric flow rate at flowing conditions, m³/s</td></tr>
    <tr><td>\( Q_\text{base} \)</td><td>= Volumetric flow rate at base conditions, m³/s</td></tr>
    <tr><td>\( \rho \)</td><td>= Gas density at flowing conditions, kg/m³</td></tr>
    <tr><td>\( \rho_\text{base} \)</td><td>= Gas density at base conditions, kg/m³</td></tr>
    <tr><td>\( P_\text{base} \)</td><td>= Base pressure, kPa</td></tr>
    <tr><td>\( P \)</td><td>= Flowing pressure, kPa</td></tr>
    <tr><td>\( T_\text{base} \)</td><td>= Base temperature, K</td></tr>
    <tr><td>\( T \)</td><td>= Flowing temperature, K</td></tr>
    <tr><td>\( Z \)</td><td>= Gas compressibility factor (dimensionless)</td></tr>
    <tr><td>\( D \)</td><td>= Pipe inside diameter, m</td></tr>
  </table>
</div>


<div class="container">
  <p>Average pressure and gas volume inside the pipeline (base conditions):</p>

  <p>
    $$
    P_\text{avg} = \frac{2}{3} \times \frac{P_1^3 - P_2^3}{P_1^2 - P_2^2}
    \qquad
    V_\text{base} = \left( \frac{\pi D^2}{4} \right) 
    \times L_\text{pipe}
    \times \frac{P_\text{avg} \times T_\text{base}}{P_\text{base} \times T  \times Z}
    $$
  </p>

  <p>Where:</p>
  <table style="font-size: 0.95em;">
    <tr><td>\( P_\text{avg} \)</td><td>= Average gas pressure in the pipeline, kPa</td></tr>
    <tr><td>\( V_\text{base} \)</td><td>= Gas volume at base conditions, m³</td></tr>
    <tr><td>\( P_1 \)</td><td>= Upstream pressure, kPa</td></tr>
    <tr><td>\( P_2 \)</td><td>= Downstream pressure, kPa</td></tr>
    <tr><td>\( L_\text{pipe} \)</td><td>= Pipe length, m</td></tr>
    <tr><td>\( D \)</td><td>= Pipe inside diameter, m</td></tr>
    <tr><td>\( P_\text{base} \)</td><td>= Base pressure, kPa</td></tr>
    <tr><td>\( T_\text{base} \)</td><td>= Base temperature, K</td></tr>
    <tr><td>\( T \)</td><td>= Flowing gas temperature, K</td></tr>
    <tr><td>\( Z \)</td><td>= Gas compressibility factor (dimensionless)</td></tr>
  </table>
</div>










  <!-- Footer -->
  <footer  class="container" style="margin-top: 5px; font-size: 0.9em;">
    <p><strong>Disclaimer:</strong> This Gas Flow Calculator is provided for estimation and informational purposes only.
	The calculations made by this tool are based on general assumptions and may not reflect real-world operating conditions.
	While efforts have been made to ensure accuracy, we make no guarantees and accept no liability for errors or decisions made based on the results.
	Always consult a qualified engineer or technical expert before making operational decisions.</p>
  </footer>

  <!-- JS Logic -->
  <script src="formulas.js"></script>
  <script>
    const inputs = document.querySelectorAll('#inputs input');
    inputs.forEach(input => input.addEventListener('input', updateResults));
    document.addEventListener('DOMContentLoaded', updateResults);

function updateResults() {
  // Read inputs
  const E = parseFloat(document.getElementById('E').value);
  const Tb = parseFloat(document.getElementById('Tb').value);   // Base temp [°C]
  const Pb = parseFloat(document.getElementById('Pb').value);   // Base pressure [kPa]
  const P1_kPa = parseFloat(document.getElementById('P1').value); // Inlet pressure [kPa]
  const P2_kPa = parseFloat(document.getElementById('P2').value); // Outlet pressure [kPa]
  const G = parseFloat(document.getElementById('G').value);     // Specific gravity
  const Tf = parseFloat(document.getElementById('Tf').value);   // Flowing temp [°C]
  const L = parseFloat(document.getElementById('L').value);     // Length [km]
  const D_mm = parseFloat(document.getElementById('D').value);  // Diameter [mm]
  const Z = parseFloat(document.getElementById('Z').value);     // Compressibility factor
  const H1 = parseFloat(document.getElementById('H1').value);   // Elevation inlet [m]
  const H2 = parseFloat(document.getElementById('H2').value);   // Elevation outlet [m]

  // Constants
  const P_base = 101.325;  // [kPa]
  const T_base = 293.15;   // [K]
  const T_K = Tf + 273.15; // [K]
  const R = 8.314;         // [J/(mol·K)]
  const M = 0.01604;       // [kg/mol] (natural gas)

  // Weymouth standard flow (m³/s)
  const Q_std_m3s = weymouth({ E, Tb, Pb, P1: P1_kPa, P2: P2_kPa, G, Tf, L, D: D_mm, Z, H1, H2 });

  // Derived flows
  const Q_th_m3h = Q_std_m3s * 3600 / 1000;
  const Q_mil_m3d = Q_std_m3s * 86400 / 1e6;

  document.getElementById('Q_m3s').value = Q_std_m3s.toFixed(3);
  document.getElementById('Q_th_m3h').value = Q_th_m3h.toFixed(3);
  document.getElementById('Q_mil_m3d').value = Q_mil_m3d.toFixed(3);

  // Pipe cross-section area
  const D_m = D_mm / 1000;
  const area = Math.PI * Math.pow(D_m, 2) / 4;

  // Standard density (kg/m³) at base conditions
  const rho_std = (P_base * M) / (R * T_base);

  // Mass flow (kg/s) based on standard flow
  const mass_flow = Q_std_m3s * rho_std;

  // Actual densities at inlet and outlet
  const rho1_actual = (P1_kPa * M) / (Z * R * T_K); // density at P1
  const rho2_actual = (P2_kPa * M) / (Z * R * T_K); // density at P2

  // Actual volumetric flows at inlet and outlet
  const Q1_actual_m3s = mass_flow / rho1_actual;
  const Q2_actual_m3s = mass_flow / rho2_actual;

  // Velocities
  const V1 = Q1_actual_m3s / area; // at pipeline start
  const V2 = Q2_actual_m3s / area; // at pipeline end

  document.getElementById('V1').value = V1.toFixed(2);
  document.getElementById('V2').value = V2.toFixed(2);

  // Pavg calculation (for volume only)
  let Pavg;
  if (P1_kPa !== P2_kPa) {
    Pavg = (2 / 3) * ((Math.pow(P1_kPa, 3) - Math.pow(P2_kPa, 3)) / (Math.pow(P1_kPa, 2) - Math.pow(P2_kPa, 2)));
  } else {
    Pavg = P1_kPa;
  }


	// Volume inside pipeline [thousand m³]
	const Volume = Math.PI * Math.pow(D_m, 2) / 4 * (L * 1000) * (Pavg / P_base) * (T_base / (Z * T_K)) / 1000;

	document.getElementById('Pavg').value = Pavg.toFixed(0);
	document.getElementById('Volume').value = Volume.toFixed(3);

}








  </script>
</body>
</html>
